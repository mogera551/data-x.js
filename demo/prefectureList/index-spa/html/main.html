<h3>都道府県一覧</h3>
<div>
  地方選択：
  <select name="chosenRegion">
    <option value="">全国</option>
    <template id="regions">
      <option class="regions"></option>
    </template>
  </select>
</div>

<table>
  <colgroup>
    <col style="width:50px">
    <col style="width:100px">
    <col style="width:100px">
    <col style="width:120px">
    <col style="width:80px">
  </colgroup>
  <thead>
    <th>no.</th>
    <th>名前</th>
    <th>県庁所在地</th>
    <th>人口(人)</th>
    <th>割合(%)</th>
  </thead>
  <tbody>
    <template id="filteredPrefectures">
      <tr class="filteredPrefectures">
        <td class="center" data-name="no"></td>
        <td class="center" data-name="name"></td>
        <td class="center" data-name="capital"></td>
        <td class="right" data-name="population"></td>
        <td class="right" data-name="sharePopulation"></td>
      </tr>
    </template>
    <tr class="summary">
      <td class="center" colspan="3" data-name="title"></td>
      <td class="right" data-name="population"></td>
      <td class="right">100.00</td>
    </tr>
</tbody>
</table>

<style data-x:rules="bind">
template#regions {
  --loop: regions;
}

option.regions {
  --bind-value: regions.*;
  --bind-textContent: regions.*;
}

template#filteredPrefectures {
  --loop: filteredPrefectures;
}

tr.filteredPrefectures td[data-name='no'] {
  --bind-textContent: filteredPrefectures.*.no;
}

tr.filteredPrefectures td[data-name='name'] {
  --bind-textContent: filteredPrefectures.*.name;
}

tr.filteredPrefectures td[data-name='capital'] {
  --bind-textContent: filteredPrefectures.*.capital;
}

tr.filteredPrefectures td[data-name='population'] {
  --bind-textContent: filteredPrefectures.*.population|locale-string;
  --bind-class-under-million: filteredPrefectures.*.population|lt:1000000;
  --bind-class-over-5million: filteredPrefectures.*.population|ge:5000000;
}

tr.filteredPrefectures td[data-name='sharePopulation'] {
  --bind-textContent: filteredPrefectures.*.sharePopulation|fixed:2;
}

tr.summary td[data-name='title'] {
  --bind-textContent: sumTitle;
}

tr.summary td[data-name='population'] {
  --bind-textContent: sumPopulation|locale-string;
}
</style>
